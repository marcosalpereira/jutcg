package br.gov.esaf.sgc.dao.impl;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import javax.ejb.Stateless;
import javax.persistence.Query;

import org.jboss.seam.annotations.Name;

import br.gov.esaf.sgc.dao.VinculoProvaFaseDao;
import br.gov.esaf.sgc.model.AplicacaoProva;
import br.gov.esaf.sgc.model.CampoAtuacao;
import br.gov.esaf.sgc.model.Cargo;
import br.gov.esaf.sgc.model.Cidade;
import br.gov.esaf.sgc.model.Concurso;
import br.gov.esaf.sgc.model.Etapa;
import br.gov.esaf.sgc.model.Fase;
import br.gov.esaf.sgc.model.Idioma;
import br.gov.esaf.sgc.model.Inscricao;
import br.gov.esaf.sgc.model.OfertaCargoConcurso;
import br.gov.esaf.sgc.model.VinculoProvaFase;
import br.gov.esaf.sgc.model.VinculoProvaFase.StatusVinculo;
import br.gov.esaf.sgc.model.prova.Prova;
import br.gov.esaf.sgc.model.prova.ProvaObjetiva;
import br.gov.esaf.sgc.model.prova.Prova.StatusProva;
import br.gov.esaf.sgc.model.prova.Prova.TipoCorrecaoProva;
import br.gov.esaf.sgc.model.prova.ProvaObjetiva.NumeroAplicacaoProva;

/**
 * Implementacao da interface {@link VinculoProvaFaseDao}.
 */
@Stateless
@Name("vinculoProvaFaseDao")
public class VinculoProvaFaseDaoBean extends HibernateDaoGenerico<VinculoProvaFase> implements
    VinculoProvaFaseDao {

    @Override
    protected Class<VinculoProvaFase> getClasseEntidade() {
        return VinculoProvaFase.class;
    }

    /** {@inheritDoc} */
    @Override
    public void inserir(VinculoProvaFase vinculoProvaFase) {
        inserirEntidade(vinculoProvaFase);
    }

    /** {@inheritDoc} */
    @Override
    public void atualizar(VinculoProvaFase vinculoProvaFase) {
        atualizarEntidade(vinculoProvaFase);
    }

    /** {@inheritDoc} */
    @Override
    public void excluir(VinculoProvaFase vinculoProvaFase) {
        excluirEntidade(vinculoProvaFase);
    }

    /** {@inheritDoc} */
    @Override
    @SuppressWarnings("unchecked")
    public Set<VinculoProvaFase> selecionar(Fase fase) {
        final String hql = "from VinculoProvaFase v where v.fase = :fase";
        final List<VinculoProvaFase> resultList =
            createQuery(hql).setParameter("fase", fase).getResultList();

        return new HashSet<VinculoProvaFase>(resultList);
    }


    /** {@inheritDoc} */
    @Override
    @SuppressWarnings("unchecked")
    public List<VinculoProvaFase> selecionar(OfertaCargoConcurso oferta) {
        final String hql =
            "from VinculoProvaFase v"
            + " where v.ofertaCargoConcurso = :oferta"
            + " order by v.id";

        return createQuery(hql).setParameter("oferta", oferta).getResultList();
    }


}
